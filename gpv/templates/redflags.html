{% extends "base.html" %}
{% block body %}
<style type="text/css">
  .redflagInfo{
    color:#2c3e50;
    float:right;
  }

  .redflagInfo:hover{
    text-decoration: underline;
    color: blue;
    cursor: pointer;
  }
  </style>
<script type="text/javascript" src="{{ url_for('static', filename='redFlags.js') }}"></script>
<script type="text/javascript">
      google.load("visualization", "1", {packages:["table"]});

      $(document).ready(function(){
        $(".commune-dropdown-li-first").addClass("active");
        $( "#btn_red_flag_info" ).click(function() {
                $( "#jqueryUI" ).dialog({
                   draggable: false,
                   autoOpen: false, 
                   resizable: false,
                   hide: "slide",
                   show : "slide",
                   position: {my: "top", at: "top+100", of: window},
                   closeOnEscape: true,
                   width: 700      
                });
                
                $( "#jqueryUI" ).empty();
                $( "#jqueryUI" ).append('Kontrata hijëzohet me të kuqe atëherë kur: ');

                $( "#jqueryUI" ).append('<ul>');
                for (var i = 0; i< redFlags.length; i++) {
                  $( "#jqueryUI" ).append('<li>' + redFlags[i] + '</li>');
                }
                $( "#jqueryUI" ).append('</ul>');
                
                $( "#jqueryUI" ).dialog('open');
            });


        var url = '{{ config.BASE_PATH }}/json/{{ komuna }}/red-flags/'+ '2016';
        $.get(url, function(){
        }).done(function(jsonResult){
            buildTable(jsonResult, '2016');
            $('#results_2016').dataTable({
              "paging": true,
              "pagingType": "full_numbers"
            });
        });

        $('#viti-select').on("change", function(event){
          var year_get = $('#viti-select').val();
          var url_get = '{{ config.BASE_PATH }}/json/{{ komuna }}/red-flags/'+ year_get;

          $.get(url_get, function(){
          }).done(function(results, year_get){
            buildTable(results, year_get);
            // Some time later, recreate with just filtering (no scrolling)
            $('#results_' + year_get).dataTable({
              "paging": true,
              "pagingType": "full_numbers"
            });
          });
        });
      });
</script>

<div id="container" style="padding-top:100px;padding-left:100px;padding-right:100px;">
  <div style="color:red;" align="center">
    <strong>Vërejtje:</strong> Hijëzimi me të kuqe nuk do të thotë që tenderi është i korruptuar por që përmbush kushtet e parapara për "red flag"
  </div>
  <br>
  <br>

  <div>
    <label class="redflagInfo" id="btn_red_flag_info">Çfarë janë "Red Flags" ?</label>
  </div>

  <form class="form-horizontal">
    <div class="form-group">
        <label for="viti-select" class="control-label col-xs-2">Viti:</label>
        <div class="col-xs-2">
          <select class="form-control" id="viti-select" name="viti-select">
            <option value="2010">2010</option>
            <option value="2011">2011</option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
            <option value="2014">2014</option>
            <option value="2015">2015</option>
            <option value="2016" selected="selected">2016</option>
          </select>
        </div>
    </div>
  </form>

  <div id="table">
  </div>

  <br>
  <br>
   <div id="jqueryUIRedFlag" title='Detajet e "Red Flags"'>
  </div>
  <div id="jqueryUI" title='Çfarë janë "Red Flags" ?'>
  </div>
</div>


{% endblock %}